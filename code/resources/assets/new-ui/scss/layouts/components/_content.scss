/**
 * Default styles with JavaScript disabled
 * =======================================
 * 1. Used for the off canvas menu
 * 2. Setting a background so container will fall nicely over the sidebar
 * 3. Set the z-index higher than the menus
 */

.k-content {
  transition: transform $transition-time-easing; // 1
  background: white; // 2
  position: relative; // 3
  z-index: 2; // 3

  @include psuedo(after) {
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: black;
    z-index: -1;
    display: block;
    opacity: 0;
    transition: all .2s ease-in-out;
  }

  // Faking flexbox on older browsers by using table styling
  @include breakpoint($desktop) {
    display: table-cell;
    width: 100%;
  }
}



/**
 * When flexbox is in use
 * ======================
 */

@include flexbox {
  .k-content {
    display: flex;
    flex: 1 1 auto;
    flex-direction: column;
    width: auto;
  }
}



/**
 * Container when toggled
 * ======================
 * 1. Set left to the width of the menu so the menu will appear
 * 2. Set right to the negative width of the menu so the menu will appear
 * 3. Reset when screen is wide enough
 * 4. Set a box shadow so menus appear behind container
 */

.show-left-menu {
  .k-content,
  .k-titlebar {
    transform: translate($sidebar-width, 0); // 1

    @include breakpoint($desktop) {
      transform: translate(0, 0); // 3
    }
  }
}

.show-right-menu {
  .k-content,
  .k-titlebar {
    transform: translate(-($sidebar-width), 0); // 2

    @include breakpoint($desktop) {
      transform: translate(0, 0); // 3
    }
  }
}

.opened--left,
.opened--right {
  .k-content {
    overflow: hidden;

    @include breakpoint($desktop) {
      overflow: auto; // 3
    }
  }
}



/**
 * The overlay
 * ===========
 * 1. Cover the entire container
 * 2. Hide by setting z-index to -1 because item can't transition if display is set from none to block
 * 3. Set opacity to 0 by default
 * 4. Hide overlay when screen is wide enough
 */

.off-canvas-overlay {
  display: block;
  content: " ";
  position: absolute; // 1
  top: 0; // 1
  right: 0; // 1
  bottom: 0; // 1
  left: 0; // 1
  z-index: -1; //2
  opacity: 0; // 3
  background: $overlay-background;
  transition: opacity $transition-time-easing;

  @include breakpoint($desktop) {
    display: none; // 4
  }
}



/**
 * Overlay when toggled
 * ====================
 * 1. Set opacity
 * 2. Set z-index to 1 so it will become visible
 */

.show-left-menu,
.show-right-menu {
  .off-canvas-overlay {
    opacity: .5; // 1
  }
}

.opened--left,
.opened--right {
  .off-canvas-overlay {
    z-index: 2; // 2
  }
}