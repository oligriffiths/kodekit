/**
 * When flexbox is in use
 * ======================
 */

@include flexbox {
  .k-table-container {
    display: flex;
    flex: 1 1 auto;
    flex-direction: column;
    overflow: auto;

    .k-table {
      display: flex;
      flex: 1 1 auto;

      table {
        flex: 1 1 auto;
      }
    }

    .k-table-pagination {
      flex: 0 0 auto;
    }
  }
}



/**
 * Table contents
 * ==============
 */

.k-table {
  overflow: auto;
  background: $table-background;

  table {
    width: 100%;
    text-align: left;
  }

  /**
   * Cells
   * 1. Position checkbox
   * 2. Remove default margin and set negative top margin to visually align vertically
   */

  th,
  td {
    text-align: left;
    vertical-align: middle;
    height: $table-cell-size;
    position: relative;

    input {
      display: inline-block; // 1
      vertical-align: middle; // 1
      margin: -1px 0 0 0; // 2
      height: 1em;
    }
  }



  /**
   * Head
   * 1. Don't use long header titles since they won't be wrapped
   * 2. Whole <th> should be clickable
   */

  th {
    @include border(bottom, $table-header-border);
    background: $table-header-background;
    white-space: nowrap; // 1
    z-index: 1;
    padding: 0 $table-cell-spacing;

    a {
      display: block; // 2
      padding: $table-cell-spacing 0;
      line-height: $table-cell-size - ($table-cell-spacing * 2);
    }
  }



  /**
   * Body
   * 1. No bottom border for last item
   * 2. Small extra info below title display" block to display below title
   */

  td {
    @include border(bottom, $table-cell-border);
    background: $table-cell-background-even;
    padding: $table-cell-spacing;
  }

  tr:nth-child(odd) {
    td {
      background: $table-cell-background-odd;
    }
  }

  tr:last-child {
    td {
      border-bottom: none; // 1
    }
  }

  small {
    display: block; // 2
  }

  a {
    text-decoration: none;

    &:hover,
    &:focus {
      text-decoration: underline;
    }
  }



  /**
   * Selected
   * 1. Coloring Links and extra elements
   */

  tr.selected {
    td {
      background: $table-cell-accent-background;
      color: $table-cell-accent-color;

      a, i, span {
        color: $table-cell-accent-color;
      }
    }
  }
}



/**
 * Table pagination
 * ================
 */

.k-table-pagination {
  @include border(top, $table-pagination-border);
  background: $table-pagination-background;
  padding: $table-pagination-spacing;



  /**
   * Pagination contents
   * -------------------
   * 1. Align vertically
   * 2. Remove standard Bootstrap margin
   * 3. Style <select> to be as large as the pagination
   * 4. Make sure <select> is always as small as possible
   * 5. Separate <select> from pagination
   */

  .limit,
  .pagination {
    display: inline-block; // 1
    vertical-align: middle; // 1
  }

  .pagination {
    margin: 0; // 2
  }

  select {
    height: $input-height-base; // 3
    width: auto; // 4
    margin-right: $table-pagination-spacing; // 5
  }
}



/**
 * Footable
 * ========
 * Responsive table views
 */

.footable.breakpoint {
  .footable-toggle {
    display: block;
    width: $footable-toggle-size;
    height: $footable-toggle-size;
    border-radius: 50%;
    border: $footable-toggle-border-size solid $footable-toggle-color;
    position: absolute;
    top: 50%;
    right: 10px;
    margin-top: -($footable-toggle-size / 2);

    @include icon-after(chevron-down, true) {
      display: block;
      color: $footable-toggle-color;
      font-size: $footable-toggle-icon-size;
      width: $footable-toggle-icon-size;
      height: $footable-toggle-icon-size;
      line-height: $footable-toggle-icon-size;
      margin: ((($footable-toggle-size - $footable-toggle-icon-size) / 2) - $footable-toggle-border-size);
    }
  }

  tr.selected {
    .footable-toggle {
      border-color: $footable-toggle-color-active;

      &:after {
        color: $footable-toggle-color-active;
      }
    }
  }
}




/**
 * Sorting
 * =======
 */

th.-koowa-desc a {
  @include psuedo(after, $display: false, $position: false) {
    display: inline-block;
    position: relative;
    vertical-align: middle;
    margin-left: 5px;

    @include arrow(top);
  }
}

th.-koowa-asc a {
  @include psuedo(after, $display: false, $position: false) {
    display: inline-block;
    position: relative;
    vertical-align: middle;
    margin-left: 5px;

    @include arrow(bottom);
  }
}